<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pooja Rajendran Raju">
<meta name="dcterms.date" content="2024-05-12">

<title>Patagonia - Exploring Sustainable Supply Chain – Pooja Rajendran Raju</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-a14e3238c51140e99ccc48519b6ed9ce.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Pooja Rajendran Raju</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/praj0022"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/pooja-rajendran-raju-6245a2301/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Patagonia - Exploring Sustainable Supply Chain</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Supply Chain</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Pooja Rajendran Raju </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 12, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Established in 1973 by Yvon Chouinard, <a href="https://www.patagonia.com.au">Patagonia</a> began as a small climbing gear business before diversifying into outdoor apparel. The brand swiftly gained renown for its durable outdoor clothing. From the outset, Patagonia prioritized environmental sustainability and ethics, pioneering initiatives like recycled materials and fair labor standards, earning recognition for its Fair Trade Certified™ apparel.</p>
<section id="core-products-and-services" class="level2">
<h2 class="anchored" data-anchor-id="core-products-and-services">Core Products and Services</h2>
<ul>
<li>Prolonging the longevity of its products and reducing waste. Example: <a href="https://wornwear.patagonia.com">Worn Wear Program</a> promotes sustainability by repairing and recycling outdoor apparel and gear.</li>
<li>Providing a lifetime warranty for all items sold.</li>
<li>Selecting products based on a combination of functional necessity and environmental impact, utilizing metrics like environmental profit and loss evaluations.</li>
<li>Its core products include outdoor apparel: <em>Jackets</em>, <em>Fleeces</em>, <em>Base Layers</em>, <em>Backpacks &amp; Gears</em> and <em>Footwear</em></li>
</ul>
</section>
<section id="customer-base" class="level2">
<h2 class="anchored" data-anchor-id="customer-base">Customer Base</h2>
<ul>
<li>Patagonia’s customer base consists primarily of environmentally conscious individuals who value transparency, sustainability, and ethical practices along with individuals interested in sports and outdoors adventures.</li>
<li>They are attracted to Patagonia’s commitment to disclosing the origin and manufacturing process of its products and sustainability measures undertaken at every stage. Materials used by company <a href="https://www.patagonia.com/environmental-responsibility-materials/">Environmental Responsibility</a></li>
</ul>
</section>
<section id="suppliers" class="level2">
<h2 class="anchored" data-anchor-id="suppliers">Suppliers</h2>
<ul>
<li>As of May 2023, Patagonia is partnered with 70 suppliers globally. Here are a few examples:</li>
</ul>
<ol type="1">
<li><strong>Finished Goods Outerwear</strong> : Bangladesh: <em>Youngone - KSL</em> , Colombia: <em>Supertex - Eje Cafetero</em></li>
<li><strong>Finished Goods Boots</strong> : Portugal: <em>HUGAL - Indústria de Calçado, Lda</em></li>
<li><strong>Finished Goods Sportswear</strong>: <em>Sri Lanka Hirdaramani - Kahathuduwa</em></li>
</ol>
<ul>
<li>Patagonia updates a comprehensive list of suppliers biannually, in May and November, making it publicly available. <a href="https://eu.patagonia.com/on/demandware.static/-/Library-Sites-PatagoniaShared/default/dw0118d18e/PDF-EU/Patagonia-Finished-Goods-Supplier-List-May-2023.xlsx">Supplier List</a>.</li>
<li>Patagonia collaborates with suppliers committed to sustainability, fair labor, and transparent supply chains, implementing multi-tier checks.</li>
</ul>
</section>
<section id="functional-factors" class="level2">
<h2 class="anchored" data-anchor-id="functional-factors">Functional Factors</h2>
<section id="selling-formats" class="level3">
<h3 class="anchored" data-anchor-id="selling-formats">Selling Formats</h3>
<ul>
<li>Patagonia using different selling formats through both physical and online channels including:</li>
</ul>
<ol type="1">
<li><p>Company-Owned Retail stores: It approximately boasts of 70 retail stores globally, located in cities like New York, Chicago in the United States, Paris and Amsterdam in Europe and Osaka, Tokyo in Asia, among others.</p></li>
<li><p>Online Retail: The company hosts its own website to sell products. Where customers can browse and purchase items online. <a href="https://www.patagonia.com/home/">Official Website</a></p></li>
<li><p>Authorized Dealers: It has a network of dealers whose ideals align with their pro-environmental motives. A list of its dealers is shared on their <a href="https://www.patagonia.com/actionworks/dealers/">website</a>. To list a few: <em>Evo</em>, <em>Great Outdoor Provision Co.</em>, <em>The Trail Head</em> and <em>Pack &amp; Paddle</em></p></li>
<li><p>Wholesale Partnerships: The company engages in wholesale distribution, enabling other retailers to carry and sell Patagonia products in their stores. A few wholesale dealers are: <a href="https://lavintage.com/products/north-face-patagonia-colombia-bale-of-100-lbs">LA Vintage</a>, <a href="https://aggregatorwholesale.com/products/copy-of-carhartt-jacket-mix">Aggregator Wholesale</a></p></li>
</ol>
</section>
</section>
<section id="what-makes-patagonia-unique" class="level2">
<h2 class="anchored" data-anchor-id="what-makes-patagonia-unique">What Makes Patagonia Unique</h2>
<ul>
<li>Patagonia’s holistic sustainability approach, transparency, and advocacy make it a compelling case study at the intersection of business, ethics, and environmental conservation amidst the rise of fast fashion.</li>
<li>It prioritizes product innovation using sustainable materials and conventional manufacturing to reduce its environmental footprint and maintains robust environmental and animal welfare programs for material sourcing.</li>
<li>Initiatives such as the following distinguish it from others in the industry: <a href="https://www.patagonia.com/our-footprint/supply-chain-environmental-responsibility-program.html">Supply Chain Environmental Responsibility Program</a> , <a href="https://www.patagonia.com/our-footprint/responsible-wool-standard.html">Responsible Wool Standard</a>, <a href="https://www.patagonia.com/our-footprint/fair-trade.html">Fair Trade</a>, <a href="https://www.patagonia.com/our-footprint/living-wage.html">Living Wage</a>, <a href="https://www.patagonia.com/our-footprint/regenerative-organic-certification.html">Regenerative Organic Certification</a></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="sc1.png" class="img-fluid figure-img" width="633"></p>
<figcaption>CSR Initiatives <em>Source: (Patagonia, 2021)</em></figcaption>
</figure>
</div>
</div>
</div>
<ul>
<li>Patagonia collaborates with NGOs, governments, academic institutions, and research centers to develop environmentally responsible supply chains, supporting its sustainability goals. Additionally, it allocates 1% of its annual revenue to environmental initiatives through the “1% for the Planet Foundation.”</li>
</ul>
</section>
<section id="data-collection" class="level2">
<h2 class="anchored" data-anchor-id="data-collection">Data Collection</h2>
<ul>
<li>The data collection involved thorough research from Patagonia’s official website, blogs, founder’s notes, company history, and supplier list. Most data came from open-source information provided by the company.</li>
<li>Academic research articles and papers sourced from platforms such as <em>ResearchGate</em>, <em>Scholarship @ Claremont</em>, and <em>Wiley Online Library</em> were consulted. Business-related data was also obtained from <em>Statista</em> to enrich the analysis.</li>
<li>All sources are referenced below.</li>
</ul>
</section>
</section>
<section id="patagonia-supply-chain" class="level1">
<h1>Patagonia Supply Chain</h1>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="sc2.png" class="img-fluid figure-img" width="820"></p>
<figcaption>Patagonia Supply Chain and Value Chain. <em>Source: (Pongtratic, 2007; Patagonia, 2021; Bosco, 2017)</em></figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="customer-value-creation" class="level1">
<h1>Customer Value Creation</h1>
<section id="dimensions-of-customer-value" class="level2">
<h2 class="anchored" data-anchor-id="dimensions-of-customer-value">Dimensions of Customer Value</h2>
<ol type="1">
<li><strong>Conformance to Requirements</strong></li>
</ol>
<ul>
<li>Patagonia emphasizes quality, longevity, and eco-friendliness in its products, using top-notch materials and ethical production standards to ensure environmental sustainability. Customers value the brand’s dedication to crafting dependable and ethically sourced outdoor clothing and equipment.</li>
</ul>
<ol start="2" type="1">
<li><strong>Product Selection</strong></li>
</ol>
<ul>
<li>Patagonia provides a wide range of products suitable for outdoor enthusiasts, including technical outerwear, performance gear, casual clothing and accessories.</li>
<li>It caters to different activities and lifestyles producing high performing gear, striking a balance between functionality and sustainability.</li>
</ul>
<ol start="3" type="1">
<li><strong>Price and Brand</strong></li>
</ol>
<ul>
<li>Patagonia is a premium outdoor apparel brand with higher-priced products as compared to its competitors, due to their emphasis on quality, durability, and ethical values, which customers value and are willing to invest in.</li>
<li>Its positive reputation for ethical business practices and environmental care enhances the value of its products and customers perception of the brand.</li>
</ul>
<ol start="4" type="1">
<li><strong>Value-added Services</strong></li>
</ol>
<ul>
<li>Patagonia provides additional services to enhance customer satisfaction. Repair Services and programs such as <strong>Worn Wear</strong> encourage customers to extend the life of their clothing by repairing, reusing, and recycling Patagonia products.</li>
<li>Patagonia offers generous product warranties and guarantees on their products.</li>
</ul>
<ol start="5" type="1">
<li><strong>Relationships and Experiences</strong></li>
</ol>
<ul>
<li>Patagonia emphasizes authentic connections with customers through personalized interactions and community engagement. Through events, workshops, and online platforms, outdoor enthusiasts have opportunities to connect, exchange experiences, and gain knowledge collectively.</li>
</ul>
</section>
<section id="service-quality-discussion" class="level2">
<h2 class="anchored" data-anchor-id="service-quality-discussion">Service Quality Discussion</h2>
<p><strong>SERVQUAL</strong> Service quality model in Patagonia.</p>
<ol type="1">
<li><strong>Reliability</strong></li>
</ol>
<ul>
<li>Patagonia guarantees the quality and durability of its products through lifetime warranties and repair services. Customers can rely on their Patagonia gear to perform effectively in diverse outdoor environments.</li>
</ul>
<ol start="2" type="1">
<li><strong>Responsiveness</strong></li>
</ol>
<ul>
<li>Patagonia’s customer support team is recognized for its prompt handling of inquiries, offering product suggestions, and swiftly resolving concerns. Its online resources and educational content provide access to information and support for guidance on sustainability, product maintenance, or outdoor pursuits.</li>
</ul>
<ol start="3" type="1">
<li><strong>Assurance</strong></li>
</ol>
<ul>
<li>Patagonia builds trust through transparency, sustainability, and ethical conduct. Its transparent supply chain, manufacturing procedures, and environmental efforts, assures customers of its integrity and commitment to social and environmental ethics. Fair Trade Certified™ products guarantee fair wages and safe working conditions, reinforcing Patagonia’s ethical commitments.</li>
</ul>
<ol start="4" type="1">
<li><strong>Empathy</strong></li>
</ol>
<ul>
<li>Patagonia shows empathy by considering customer feedback and integrating it into product design and improvement. Through customer feedback platforms like surveys and online forums, the company provides avenues for customers to express their experiences and ideas directly to Patagonia.</li>
</ul>
<ol start="5" type="1">
<li><strong>Tangibles</strong></li>
</ol>
<ul>
<li>Patagonia’s focus on the design and layout of its retail stores, longevity of its products, and efficiency of its communication materials, like website content and product packaging elevates the holistic customer journey and strengthens its brand identity.</li>
</ul>
</section>
<section id="service-gap-discussion" class="level2">
<h2 class="anchored" data-anchor-id="service-gap-discussion">Service Gap Discussion</h2>
<ul>
<li>Considering the brand’s dedication to eco-friendly supply chains, there may be unique challenges in product availability and inventory management, especially for popular or seasonal items. Variations in customer preferences, traditional manufacturing processes, and ongoing audits to ensure suppliers adhere to sustainable practices could result in occasional product shortages or unavailability.</li>
<li>Patagonia invested in a new inventory analytics model by <a href="https://avianaglobal.com/portfolio/patagonia/">Aviana</a> which aims to enhance merchandising and supply planning, providing detailed inventory forecasts as said by <em>Sandy Buechley, Business Intelligence Manager, Patagonia</em></li>
</ul>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ol type="1">
<li><em>Official Patagnia Website</em>, https://www.patagonia.com.au/pages/our-footprint</li>
<li>Environmental Responsibility, Source: Patagonia, https://www.patagonia.com/environmental-responsibility-materials/</li>
<li><em>Patagonia Dealers</em>, Source: Patagonia , https://www.patagonia.com/actionworks/dealers/</li>
<li><em>How We’re Making Change</em>, Source: Patagonia, https://www.patagonia.com.au/pages/our-footprint</li>
<li><em>Factories, Farms and Mills</em>, Source: Patagonia, https://www.patagonia.com/factories-farms-mills/</li>
<li><em>Patagonia Activism</em>, Source: Patagonia, https://www.patagonia.com.au/pages/activism</li>
<li><em>Patagonia Supplier List</em>, Source: Patagonia, https://eu.patagonia.com/on/demandware.static/-/Library-Sites-PatagoniaShared/default/dw0118d18e/PDF-EU/Patagonia-Finished-Goods-Supplier-List-May-2023.xlsx</li>
<li>Mojtaba M. Shourkaei, Kelsey M. Taylor, Bruno Dyck, <em>Examining sustainable supply chain management via a social-symbolic work lens: Lessons from Patagonia</em>, 31 August 2023, https://doi.org/10.1002/bse.3552</li>
<li>Bosco, Mary-Clare, <em>“From Yosemite to a Global Market: How Patagonia, Inc.&nbsp;has Created an Environmentally Sustainable and Socially Equitable Model of Supply-Chain Management”</em> (2017). Pomona Senior Theses. 178. http://scholarship.claremont.edu/pomona_theses/178</li>
<li>Aviana, <em>Patagonia leverages analytics and gains new insight</em>, https://avianaglobal.com/portfolio/patagonia/</li>
<li>Reema Alkuwari, <em>Patagonia Case Analysis from a Strategic Management &amp; Corporate Responsibility Perspective</em>, May 2021, https://www.researchgate.net/publication/355683944_Patagonia_Case_Analysis_from_a_Strategic_Management_Corporate_Responsibility_Perspective</li>
<li>Martin Armstrong, <em>The Size of the Company ‘Given Away’ to Save the Planet</em>, Sep 15, 2022, https://www.statista.com/chart/28257/patagonia-inc-revenue-company-db/</li>
<li>Christian Schillmann, <em>Patagonia Inc.&nbsp;under a sustainability perspective</em>, December 2020, https://www.researchgate.net/publication/346918561_Patagonia_Inc_under_a_sustainability_perspective</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>